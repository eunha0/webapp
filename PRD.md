# Product Requirements Document (PRD)
# AI 논술 평가 시스템

**문서 버전**: 2.0  
**작성일**: 2025-12-05  
**프로젝트 코드명**: `webapp-ai`  
**상태**: Active Development

---

## 📋 목차

1. [제품 개요](#1-제품-개요)
2. [비즈니스 목표](#2-비즈니스-목표)
3. [타겟 사용자](#3-타겟-사용자)
4. [핵심 가치 제안](#4-핵심-가치-제안)
5. [기능 요구사항](#5-기능-요구사항)
6. [기술 스택](#6-기술-스택)
7. [데이터 아키텍처](#7-데이터-아키텍처)
8. [사용자 여정](#8-사용자-여정)
9. [UI/UX 설계 원칙](#9-uiux-설계-원칙)
10. [성능 및 보안 요구사항](#10-성능-및-보안-요구사항)
11. [로드맵 및 우선순위](#11-로드맵-및-우선순위)
12. [성공 지표](#12-성공-지표)
13. [리스크 및 제약사항](#13-리스크-및-제약사항)
14. [부록](#14-부록)

---

## 1. 제품 개요

### 1.1 제품 비전

**AI 논술 평가**는 최첨단 대규모 언어 모델(LLM)을 기반으로 한 혁신적인 자동화 논술 채점(Automated Essay Grading, AEG) 및 자동화 글쓰기 평가(Automated Writing Evaluation, AWE) 시스템입니다. 

교사가 논술을 **10배 빠르게 채점**하고, 학생의 학습과 성장을 촉진하는 **상세하고 실행 가능한 피드백**을 제공하여, 교육 현장의 디지털 전환을 선도합니다.

### 1.2 영감의 원천

본 프로젝트는 [EssayGrader.ai](https://www.essaygrader.ai/)의 우수한 UX/UI 디자인과 워크플로우를 벤치마킹하여, 한국 교육 환경에 최적화된 현대적인 SaaS 솔루션을 제공합니다.

### 1.3 핵심 목표

| 목표 | 측정 지표 | 목표치 |
|------|----------|--------|
| **일관된 채점** | QWK (Quadratic Weighted Kappa) | 0.61+ |
| **상세한 피드백** | 학생 만족도 | 85%+ |
| **시간 절약** | 채점 시간 단축률 | 90% (10배 빠름) |
| **교사 채택률** | 활성 교사 계정 | 1,000+ |
| **학생 참여도** | 재제출률 | 30%+ |

---

## 2. 비즈니스 목표

### 2.1 단기 목표 (3-6개월)

1. **MVP 완성**: 교사 및 학생 워크플로우 전체 구현
2. **베타 테스트**: 5-10개 학교에서 파일럿 프로그램 진행
3. **피드백 수집**: 교사 및 학생으로부터 개선 사항 수집
4. **성능 검증**: QWK 0.61+ 달성 확인

### 2.2 중기 목표 (6-12개월)

1. **정식 출시**: 프로덕션 환경 배포
2. **사용자 확대**: 1,000명 이상의 교사 및 10,000명 이상의 학생 온보딩
3. **LMS 통합**: Google Classroom, Canvas 등 주요 LMS와 연동
4. **비즈니스 모델**: Freemium 요금제 도입

### 2.3 장기 목표 (12개월+)

1. **국제화**: 영어, 일본어, 중국어 지원
2. **AI 고도화**: GPT-5, Claude 3+ 등 최신 LLM 적용
3. **팀 협업**: 교사 그룹 및 학교 단위 대시보드
4. **데이터 분석**: 학생 성장 추적 및 예측 분석

---

## 3. 타겟 사용자

### 3.1 주요 페르소나

#### 페르소나 1: 김영희 교사 (40대, 고등학교 국어 교사)
- **목표**: 학급 30명의 논술을 빠르게 채점하고 학생별 맞춤 피드백 제공
- **Pain Point**: 1개 논술 채점에 15분 소요 → 전체 7.5시간 필요
- **기대 효과**: AI로 1시간 내 채점 완료, 상세 피드백 자동 생성

#### 페르소나 2: 박준수 학생 (17세, 고등학교 1학년)
- **목표**: 논술 실력 향상, 구체적인 개선 방법 학습
- **Pain Point**: 교사 피드백이 간략하거나 시간이 오래 걸림
- **기대 효과**: 즉각적인 피드백, 기준별 상세 조언, 재제출을 통한 학습

#### 페르소나 3: 이민수 관리자 (교장, 교감)
- **목표**: 학교 전체의 교육 품질 모니터링
- **Pain Point**: 교사별 채점 기준이 상이하여 일관성 부족
- **기대 효과**: 통계 대시보드로 전체 현황 파악, 데이터 기반 의사결정

### 3.2 부가 사용자

- **학부모**: 자녀의 논술 성장 추적
- **교육청/학교 관리자**: 교육 품질 관리
- **교육 연구자**: 데이터 분석 및 연구

---

## 4. 핵심 가치 제안

### 4.1 교사를 위한 가치

| 기능 | 가치 제안 |
|------|----------|
| **10배 빠른 채점** | 7.5시간 → 45분으로 단축 |
| **일관된 평가** | 루브릭 기반 객관적 채점 |
| **상세한 피드백** | 기준별 강점, 약점, 구체적 제안 자동 생성 |
| **채점 이력 관리** | 모든 채점 기록 자동 저장 및 검색 |
| **출력 및 공유** | 개별/일괄 PDF 출력, 학생별 배포 |

### 4.2 학생을 위한 가치

| 기능 | 가치 제안 |
|------|----------|
| **즉각적인 피드백** | 제출 후 30초 이내 결과 확인 |
| **학습 가이드** | 단계별 개선 방법 제시 |
| **재제출 가능** | 피드백 반영 후 무제한 재제출 |
| **성장 추적** | 제출 횟수별 점수 향상 시각화 |
| **학년별 맞춤 톤** | 초등/중등/고등에 맞는 언어 사용 |

### 4.3 관리자를 위한 가치

| 기능 | 가치 제안 |
|------|----------|
| **실시간 모니터링** | 전체 제출물, 채점 현황 대시보드 |
| **데이터 시각화** | Chart.js 기반 점수 분포, 활동 추세 |
| **사용자 관리** | 교사/학생 계정 및 활동 통계 |
| **교육 품질 관리** | 평균 점수, 공통 약점 분석 |

---

## 5. 기능 요구사항

### 5.1 핵심 기능 (Core Features)

#### F1. 사용자 인증 및 권한 관리

**F1.1 교사 인증**
- 회원가입: 이름, 이메일, 비밀번호
- 로그인: 세션 기반 (7일 만료)
- 비밀번호 재설정 (이메일 인증)
- 프로필 관리: 이름, 이메일 수정

**F1.2 학생 인증**
- 회원가입: 이름, 이메일, 비밀번호, 학년
- 로그인: 독립적인 학생 세션
- 학년 정보 저장 (초등/중등/고등)

**F1.3 프로필 드롭다운 메뉴** ✅ NEW!
- 헤더 프로필 아이콘 클릭 시 드롭다운 메뉴 표시
- 메뉴 항목:
  - 내 계정 (My Account)
  - 내 요금제 (My Plan)
  - 구독 결제 관리 (Subscription Management)
  - 로그아웃 (Logout, 빨간색 버튼)
- JavaScript 토글 방식 (CSS :hover 대신)
- 외부 클릭 시 자동 닫힘
- 교사 및 학생 페이지 모두 적용

**F1.4 로그인 상태 표시** ✅ NEW!
- 랜딩 페이지 헤더에서 로그인 상태에 따라 표시 변경
- 로그인 시: "나의 페이지" 링크 표시
- 로그아웃 시: "로그인" 드롭다운 표시
- localStorage 기반 클라이언트 상태 관리

#### F2. 과제 관리 (Assignment Management)

**F2.1 과제 생성**
- 기본 정보: 제목, 설명, 학년 수준, 마감일
- 제시문 추가:
  - 기본 4개 입력 필드 제공
  - 최대 11개까지 동적 추가 가능
  - 텍스트 직접 입력
  - **이미지 업로드 및 자동 OCR** ✅ NEW!
    - JPG, PNG, WebP 지원 (최대 10MB)
    - Google Cloud Vision API 사용
    - 5-10초 내 텍스트 자동 추출
    - 추출된 텍스트 입력 필드에 자동 삽입
    - Cloudflare R2 영구 저장
- 루브릭 기준 설정:
  - 기본 4개 기준 자동 생성
  - "평가 기준 추가" 버튼으로 추가
  - 각 기준: 이름(제목) + 설명
  - **플랫폼 루브릭 10개 템플릿** ✅ NEW!
    - 표준/상세/간단 논술 루브릭 (3개)
    - 뉴욕 주 루브릭 (4개)
    - IB 중등 프로그램 루브릭 (3개)
    - 드롭다운에서 선택하여 자동 적용

**F2.2 과제 조회 및 관리**
- 내 과제 목록: 카드 형태로 표시
- 과제 상세 모달:
  - 제목, 설명, 제시문 (전체), 루브릭 기준
  - 학생 액세스 코드 (생성된 경우)
  - 제출물 목록 및 채점 상태
- **과제 출력 기능** ✅ NEW!
  - "출력" 버튼 클릭 시 새 창에서 전체 정보 표시
  - 인쇄 최적화 레이아웃
  - 포함 항목: 제목, 설명, 제시문, 루브릭, 액세스 코드
- 과제 삭제: 제출물도 함께 삭제

**F2.3 액세스 코드 생성** ✅
- 6자리 숫자 코드 자동 생성 (예: 123456)
- 과제별 고유 코드
- 학생이 코드로 과제 접근 가능
- 코드 표시 및 복사 기능

#### F3. 학생 답안 관리 (Submission Management)

**F3.1 교사가 답안 추가 (대리 제출)**
- 학생 이름 입력
- 답안 입력 방식:
  - **텍스트 직접 입력**
  - **파일 업로드** ✅ NEW!
    - 이미지: JPG, PNG, WebP (최대 10MB)
    - PDF: 텍스트 기반 / 이미지 기반 (최대 10MB)
    - 드래그앤드롭 지원
    - 파일 미리보기 및 정보 표시
    - 자동 텍스트 추출 (이미지 OCR, PDF 파싱)
    - 처리 시간: 이미지 5-10초, PDF 3-15초

**F3.2 학생이 직접 제출** ✅
- 액세스 코드 입력하여 과제 접근
- 과제 정보 및 루브릭 확인
- 웹 인터페이스에서 답안 작성
- "답안 제출하기" 버튼 클릭
- 재제출 가능 (버전 자동 추적)

**F3.3 제출물 목록**
- 과제별 제출물 목록 표시
- 학생 이름, 제출일, 채점 상태
- 채점 상태: "채점 대기중" / "채점 완료"
- 제출물 삭제 기능

#### F4. AI 자동 채점 (AI Grading)

**F4.1 채점 실행**
- 제출물 목록에서 "채점하기" 버튼 클릭
- AI 채점 진행 (10-30초 소요)
- 진행 상태 표시 (로딩 애니메이션)

**F4.2 채점 결과 생성**
- **기준별 점수** (1-4점 척도):
  - 1점: 미흡 (빨간색)
  - 2점: 발전 필요 (주황색)
  - 3점: 양호 (파란색)
  - 4점: 우수 (초록색)
- **기준별 상세 피드백** ✅:
  - 긍정적 피드백 (잘한 점)
  - 개선이 필요한 부분
  - 구체적인 개선 방법 (단계별 제안, 최소 3가지)
- **종합 평가**:
  - 총점 (0-10점 또는 백분율)
  - 전체 강점 요약
  - 전체 약점 요약
  - 우선 개선 사항
  - 다음 단계 조언
- **학년별 톤 조정** ✅:
  - 초등학생: 친근하고 격려하는 톤
  - 중학생: 중간 수준의 격식
  - 고등학생: 학술적이고 심화된 톤

**F4.3 채점 결과 검토 및 수정** ✅ NEW!
- **Split-Screen 검토 모달**:
  - 왼쪽 패널: 학생 답안 전체 내용 (읽기 전용, 스크롤 가능)
  - 오른쪽 패널: 피드백 및 평가 (편집 가능)
    - 전체 점수 수정 가능
    - 종합 평가 텍스트 수정
    - 기준별 점수 및 피드백 수정
    - 종합 의견, 수정 제안, 다음 단계 조언 수정
- **실시간 편집**: 모든 필드 수정 가능
- **3가지 옵션**:
  - "출력": 채점 결과를 별도 창에서 출력/저장
  - "저장하고 완료": 수정된 피드백을 DB에 저장
  - "취소": 변경사항 없이 모달 닫기

#### F5. 채점 이력 및 출력 (Grading History & Export)

**F5.1 채점 이력 조회**
- "채점 이력" 탭에서 모든 채점 완료된 답안 확인
- 표시 정보:
  - 과제 제목
  - 학생 이름
  - 점수 (숫자 및 색상)
  - 종합 피드백 요약
  - 제출일 및 채점일

**F5.2 답안 재검토 기능** ✅ NEW!
- 답안 카드 클릭 시 Split-Screen 검토 모달 열림
- 제출물 및 피드백 자동 로드
- 학생 답안(좌측) + 피드백(우측) 동시 확인
- 모든 피드백 필드 수정 가능
- 수정 후 "저장하고 완료" 또는 "출력" 선택

**F5.3 일괄 출력 기능** ✅ NEW!
- **체크박스 선택 시스템**:
  - 각 답안 왼쪽에 체크박스 표시
  - 전체 선택/해제 체크박스 (상단)
  - 선택된 항목 수 실시간 표시
- **출력 드롭다운 메뉴**:
  - "PDF (개별 출력)": 선택한 각 답안을 별도 창에서 열기 (순차적 500ms 간격)
  - "단일 PDF 파일로 내보내기": 모든 선택 답안을 하나의 문서로 통합하여 일괄 인쇄
- **인쇄 최적화**:
  - 깔끔한 페이지 구성
  - 답안지별 페이지 구분 (page-break)
  - 상단에 전체 개수 표시
  - 일괄 인쇄 버튼 제공

#### F6. 학생 대시보드 (Student Dashboard) ✅

**F6.1 액세스 코드 입력**
- 6자리 코드 입력 UI
- 과제 정보 자동 로드 (제목, 설명, 루브릭)
- 과제가 없는 경우 에러 메시지

**F6.2 답안 작성 및 제출**
- 텍스트 에디터 (최소 100자 이상)
- "답안 제출하기" 버튼
- 제출 확인 모달
- 재제출 가능 (버전 번호 자동 증가)

**F6.3 나의 제출물**
- 제출 이력 목록 표시
- 채점 상태 실시간 표시
- 채점 완료 시 "상세 피드백 보기" 버튼

**F6.4 상세 피드백 조회**
- **전체 요약 카드**:
  - 총점 및 전체 코멘트
  - 강점 및 약점 요약
  - 우선 개선 사항
- **기준별 상세 피드백 카드**:
  - 점수 표시 (1-4점, 색상 구분)
  - 긍정적 피드백
  - 개선이 필요한 부분
  - 구체적인 개선 방법

#### F7. 관리자 대시보드 (Admin Dashboard) ✅

**F7.1 시스템 통계**
- 8개 핵심 지표 카드:
  - 총 교사 수
  - 총 학생 수
  - 총 제출물 수
  - 채점 완료 수
  - 채점 대기 수
  - 평균 점수
  - 최근 7일 활동
  - 총 과제 수
- 그라디언트 디자인, 호버 애니메이션

**F7.2 4개 주요 탭**
- **개요**: 최다 활동 교사 Top 10, 최다 제출 학생 Top 10
- **최근 활동**: 실시간 제출 및 채점 활동 (최근 50개)
- **사용자 관리**: 교사/학생 전체 목록 및 통계
- **분석**: Chart.js 기반 시각화 (제출 현황, 점수 분포)

**F7.3 데이터 시각화**
- Doughnut Chart: 채점 완료 vs 대기
- Bar Chart: 점수 분포
- 반응형 테이블 디자인

#### F8. CMS 및 리소스 관리 ✅

**F8.1 루브릭 자료**
- 10개 플랫폼 루브릭 상세 정보 게시
- 루브릭 목록 페이지 (깔끔한 레이아웃)
- 각 루브릭 세부 내용 확인 가능
- 검색 기능

**F8.2 기출 문제**
- PDF 파일 업로드 및 다운로드
- 목록 페이지 (제목, 날짜, 다운로드 버튼)
- 검색 및 필터링

**F8.3 논술 평가 자료**
- 교육 자료 게시 및 관리
- 카테고리별 분류

#### F9. 사용법 안내 페이지 ✅ NEW!

**F9.1 상세 가이드 페이지 (`/guide`)**
- **5개 주요 섹션**:
  - A. 과제 관리
  - B. 학생 답안 관리
  - C. 액세스 코드 생성 및 공유
  - D. AI 채점 및 피드백 검토
  - E. 채점 이력 확인 및 일괄 출력
- **실제 서비스 스크린샷 포함** (총 12개):
  - 과제 관리: 7개 스크린샷
  - 학생 답안 관리: 2개 스크린샷
  - AI 채점 및 피드백: 2개 스크린샷
  - 채점 이력: 1개 스크린샷
- **스크린샷 최적화**:
  - 75% 크기로 통일 (해상도 최적화)
  - 가운데 정렬, 그림자 및 테두리 효과
  - 사용 흐름에 맞게 재배치
- **반응형 디자인**: 모바일/태블릿/데스크톱 대응
- **빠른 네비게이션**: 섹션별 바로가기 링크
- **전문적인 UI**: 아이콘, 배지, 색상 코딩

**F9.2 헤더 네비게이션 최적화** ✅ NEW!
- 메뉴 순서: 기능 → 사용법 안내 → 평가 관련 자료 → 자주 묻는 질문 → 요금제
- "작동 방식" 문구 삭제
- "사용법 안내"를 "기능" 다음으로 이동

---

## 6. 기술 스택

### 6.1 프론트엔드

| 항목 | 기술 | 버전 | 목적 |
|------|------|------|------|
| **프레임워크** | Vanilla JavaScript | ES2020+ | 경량 프론트엔드 |
| **CSS** | TailwindCSS | 3.x | CDN 기반 스타일링 |
| **아이콘** | FontAwesome | 6.4.0 | 무료 아이콘 라이브러리 |
| **차트** | Chart.js | Latest | 데이터 시각화 |
| **HTTP** | Axios | 1.6.0 | API 호출 |
| **날짜** | Day.js | 1.11.10 | 날짜 포맷팅 |

### 6.2 백엔드

| 항목 | 기술 | 버전 | 목적 |
|------|------|------|------|
| **웹 프레임워크** | Hono | 4.10+ | Lightweight web framework |
| **런타임** | Cloudflare Workers | - | Edge computing platform |
| **빌드 도구** | Vite | 6.3+ | 번들링 및 개발 서버 |
| **언어** | TypeScript | 5.0+ | 타입 안전성 |
| **PDF 처리** | PDF.js (pdfjs-dist) | 3.11+ | 텍스트 기반 PDF 추출 |
| **파일 타입** | mime-types | 3.0+ | MIME 타입 검증 |

### 6.3 데이터 및 스토리지

| 항목 | 기술 | 목적 |
|------|------|------|
| **데이터베이스** | Cloudflare D1 | SQLite 기반 분산 DB |
| **파일 저장소** | Cloudflare R2 | S3 호환 Object Storage |
| **OCR/이미지** | Google Cloud Vision API | 이미지 텍스트 추출 (한글/영어) |
| **로컬 DB** | `.wrangler/state/v3/d1` | 로컬 개발용 SQLite |

### 6.4 배포 및 개발 도구

| 항목 | 기술 | 목적 |
|------|------|------|
| **배포 플랫폼** | Cloudflare Pages | Static site + Workers |
| **CLI** | Wrangler | Cloudflare 개발/배포 도구 |
| **프로세스 관리** | PM2 | 샌드박스 개발 서버 (daemon) |
| **버전 관리** | Git + GitHub | 소스 코드 관리 |

---

## 7. 데이터 아키텍처

### 7.1 데이터베이스 스키마

**총 23개 테이블, 6개 마이그레이션 완료**

#### 교사 인증 (3개 테이블)
1. **users**: 교사 계정 (id, name, email, password_hash, created_at)
2. **sessions**: 교사 세션 (session_id, user_id, expires_at)
3. **subscriptions**: 구독 정보 (id, user_id, plan, billing_cycle, start_date, end_date)

#### 학생 인증 (2개 테이블)
4. **student_users**: 학생 계정 (id, name, email, password_hash, grade_level, created_at)
5. **student_sessions**: 학생 세션 (session_id, student_id, expires_at)

#### 과제 관리 (3개 테이블)
6. **assignments**: 논술 과제 (id, user_id, title, description, grade_level, due_date, created_at)
7. **assignment_rubrics**: 과제별 루브릭 기준 (id, assignment_id, name, description, order_index)
8. **assignment_access_codes**: 액세스 코드 (id, assignment_id, code, created_at)

#### 제출물 관리 (1개 테이블)
9. **student_submissions**: 학생 답안 (id, assignment_id, student_id, student_name, essay_content, grading_status, submission_version, submitted_at, graded_at)

#### 상세 피드백 시스템 (2개 테이블)
10. **submission_feedback**: 기준별 피드백 (id, submission_id, criterion_name, score, positive_feedback, areas_for_improvement, suggestions, created_at)
11. **submission_summary**: 전체 요약 (id, submission_id, total_score, strengths, weaknesses, overall_comment, priority_improvements, next_steps, created_at)

#### 성장 추적 (1개 테이블)
12. **student_progress**: 학생별 진행 상황 (id, student_id, assignment_id, submission_count, highest_score, latest_score, improvement_rate, first_submitted_at, last_submitted_at)

#### 채점 시스템 (기존, 5개 테이블)
13. **grading_sessions**: 채점 세션 (id, prompt, grade_level, created_at)
14. **rubric_criteria**: 평가 기준 (id, session_id, name, description)
15. **essays**: 논술 (id, session_id, content)
16. **grading_results**: 채점 결과 (id, essay_id, overall_score, strengths, improvements, suggestions, next_steps)
17. **criterion_scores**: 기준별 점수 (id, result_id, criterion_id, score, feedback)

#### 학습 리소스 (2개 테이블, 기능 대기)
18. **learning_resources**: 학습 자료 (id, title, description, category, grade_level, resource_url, content, created_at)
19. **student_resource_recommendations**: 추천 자료 (id, student_id, submission_id, resource_id, reason, completed, created_at)

#### 교사 통계 (1개 테이블, 기능 대기)
20. **teacher_statistics**: 교사별 통계 (id, user_id, total_submissions, avg_score, time_saved_hours, common_strengths, common_weaknesses, last_updated)

#### CMS (1개 테이블)
21. **resource_posts**: 교육 자료 (id, category, title, content, file_url, created_at)

#### 파일 업로드 (2개 테이블)
22. **uploaded_files**: 업로드 파일 (id, user_id, filename, file_type, file_size, r2_key, extracted_text, processing_status, uploaded_at)
23. **file_processing_log**: 처리 로그 (id, file_id, step, status, message, processed_at)

### 7.2 데이터 플로우

#### 채점 플로우
```
사용자 입력 (과제, 루브릭, 논술)
    ↓
DB 저장 (assignments, rubrics, submissions)
    ↓
AI 채점 서비스 (grading-service.ts)
    ↓
상세 피드백 생성 (feedback-service.ts)
    ↓
결과 저장 (submission_feedback, submission_summary)
    ↓
프론트엔드에 표시 (Split-Screen 모달)
    ↓
교사 수정 및 저장
    ↓
학생 피드백 조회 가능
```

#### 파일 업로드 플로우
```
파일 업로드 (이미지/PDF)
    ↓
파일 검증 (타입, 크기)
    ↓
DB 메타데이터 저장 (uploaded_files)
    ↓
Cloudflare R2 업로드 (영구 저장)
    ↓
┌─────────────────┬──────────────────┐
│ 이미지 파일      │ PDF 파일          │
│ (JPG, PNG)      │ (application/pdf) │
└─────────────────┴──────────────────┘
    ↓                    ↓
Google Vision API    ┌───────────────┐
(Text Detection)     │ Text-based?   │
    ↓                └───────────────┘
텍스트 추출          Yes ↓    No ↓
    ↓              PDF.js      Google Vision
    ↓              추출        (Document Detection)
    ↓                  ↓              ↓
    └──────────────────┴──────────────┘
                       ↓
            DB에 텍스트 업데이트
                       ↓
            프론트엔드로 반환
                       ↓
        텍스트 필드에 자동 삽입
```

---

## 8. 사용자 여정

### 8.1 교사 여정 (Teacher Journey)

#### 단계 1: 온보딩
1. 랜딩 페이지 방문 (`/`)
2. "무료로 시작하기" 버튼 클릭
3. 회원가입 (`/signup`) - 이름, 이메일, 비밀번호 입력
4. 로그인 (`/login`) - 세션 생성
5. "나의 페이지" 자동 이동 (`/my-page`)

#### 단계 2: 과제 생성
1. "새 과제 만들기" 버튼 클릭
2. 과제 정보 입력:
   - 제목: "1939년 제2차 세계대전 발발"
   - 설명: "원인과 영향 분석"
   - 학년: 고등학교 2학년
   - 마감일: 2025-12-31
3. 제시문 추가:
   - 텍스트 직접 입력 또는
   - 이미지 업로드 (자동 OCR)
4. 루브릭 선택:
   - 플랫폼 루브릭 드롭다운에서 "뉴욕 주 고등학교 루브릭" 선택 또는
   - 커스텀 루브릭 생성 (기준 추가/수정)
5. "과제 생성" 버튼 클릭
6. 액세스 코드 생성 (예: 123456)
7. 코드 학생들에게 공유 (화면 공유, 출력, 디지털 공유)

#### 단계 3: 답안 수령 및 채점
1. 학생들이 액세스 코드로 답안 제출
2. 과제 상세 페이지에서 제출물 목록 확인
3. "채점하기" 버튼 클릭 (각 제출물마다)
4. AI 채점 진행 (10-30초)
5. **Split-Screen 검토 모달** 열림:
   - 왼쪽: 학생 답안 전체 (읽기 전용)
   - 오른쪽: 피드백 및 점수 (편집 가능)
6. 피드백 검토 및 수정:
   - 총점 조정
   - 종합 평가 수정
   - 기준별 피드백 수정
7. "저장하고 완료" 또는 "출력" 선택

#### 단계 4: 채점 이력 관리
1. "채점 이력" 탭 클릭
2. 모든 채점 완료된 답안 확인
3. **재검토 필요한 답안 클릭**:
   - Split-Screen 모달 다시 열림
   - 피드백 수정 및 저장
4. **일괄 출력**:
   - 출력할 답안 체크박스 선택
   - "전체 선택" 또는 개별 선택
   - "출력" 드롭다운 메뉴 열기
   - "단일 PDF 파일로 내보내기" 선택
   - 모든 선택 답안이 하나의 문서로 통합되어 인쇄 가능

### 8.2 학생 여정 (Student Journey)

#### 단계 1: 온보딩
1. 선생님으로부터 액세스 코드 수령 (예: 123456)
2. 학생 회원가입 (`/student/signup`) - 이름, 이메일, 비밀번호, 학년 입력
3. 학생 로그인 (`/student/login`)
4. 학생 대시보드 자동 이동 (`/student/dashboard`)

#### 단계 2: 과제 접근 및 제출
1. 액세스 코드 입력 (123456)
2. 과제 정보 확인:
   - 과제 제목 및 설명
   - 제시문 (있는 경우)
   - 평가 루브릭 (기준 및 설명)
3. 답안 작성:
   - 텍스트 에디터에서 직접 작성
   - 최소 100자 이상 입력
4. "답안 제출하기" 버튼 클릭
5. 제출 확인 메시지 표시

#### 단계 3: 피드백 확인
1. "나의 제출물" 섹션에서 채점 상태 확인
2. 채점 완료 시 "상세 피드백 보기" 버튼 활성화
3. 피드백 페이지로 이동 (`/student/feedback/:id`)
4. **전체 요약 카드** 확인:
   - 총점 (예: 28/40, 70%)
   - 전체 강점 및 약점
   - 우선 개선 사항
5. **기준별 상세 피드백 카드** 확인:
   - 각 기준별 점수 (1-4점, 색상 구분)
   - 긍정적 피드백 (잘한 점)
   - 개선이 필요한 부분
   - 구체적인 개선 방법 (단계별 제안)

#### 단계 4: 재제출 (개선 후)
1. 피드백을 읽고 개선 방법 학습
2. 동일한 액세스 코드로 다시 접근
3. 피드백을 반영하여 답안 수정
4. 재제출 (버전 2 자동 기록)
5. 개선율 자동 계산 (예: "1차 제출 대비 15% 향상")

### 8.3 관리자 여정 (Admin Journey)

#### 단계 1: 대시보드 접근
1. 관리자 로그인
2. 관리자 대시보드 이동 (`/admin`)

#### 단계 2: 시스템 모니터링
1. **개요 탭**:
   - 8개 핵심 지표 확인 (교사/학생/제출물/채점/평균 점수)
   - 최다 활동 교사 Top 10
   - 최다 제출 학생 Top 10
2. **최근 활동 탭**:
   - 실시간 제출 및 채점 활동 모니터링
   - 최근 50개 활동 내역 확인
3. **사용자 관리 탭**:
   - 교사/학생 전체 목록
   - 교사별 과제 수, 제출물 수
   - 학생별 제출물 수, 학년 정보
4. **분석 탭**:
   - Chart.js 기반 데이터 시각화
   - 채점 완료 vs 대기 (Doughnut Chart)
   - 점수 분포 (Bar Chart)

---

## 9. UI/UX 설계 원칙

### 9.1 디자인 철학

**"Simple, Fast, Reliable"**

- **Simple**: 직관적인 인터페이스, 최소한의 클릭
- **Fast**: 즉각적인 피드백, 빠른 로딩
- **Reliable**: 일관된 채점, 안정적인 서비스

### 9.2 색상 시스템

| 색상 | 용도 | Hex Code |
|------|------|----------|
| **Navy Blue** | 주 브랜드 색상, 버튼, 헤더 | `#1e3a8a` |
| **Green** | 성공, 4점 (우수) | `#10b981` |
| **Blue** | 정보, 3점 (양호) | `#3b82f6` |
| **Orange** | 경고, 2점 (발전 필요) | `#f59e0b` |
| **Red** | 오류, 1점 (미흡), 로그아웃 | `#ef4444` |
| **Gray** | 배경, 텍스트 | `#6b7280` |

### 9.3 타이포그래피

- **제목 (H1)**: 3rem (48px), 굵게
- **부제목 (H2)**: 2rem (32px), 중간 굵기
- **본문 (P)**: 1rem (16px), 일반
- **작은 텍스트**: 0.875rem (14px), 얇게
- **폰트**: 시스템 기본 폰트 (Noto Sans KR, Malgun Gothic)

### 9.4 레이아웃 원칙

- **반응형 디자인**: Mobile First (320px - 768px - 1024px - 1440px+)
- **최대 너비**: 1280px (콘텐츠 영역)
- **여백**: 8px 단위 시스템 (8px, 16px, 24px, 32px, 48px)
- **카드 디자인**: 둥근 모서리 (8px), 그림자, 호버 효과

### 9.5 인터랙션 패턴

- **버튼**:
  - Primary: Navy Blue 배경, 흰색 텍스트
  - Secondary: 흰색 배경, Navy Blue 테두리
  - Danger: 빨간색 배경, 흰색 텍스트
  - 호버: 투명도 90%
- **모달**:
  - 반투명 배경 (rgba(0,0,0,0.5))
  - 중앙 정렬
  - ESC 키로 닫기
  - 외부 클릭 시 닫기
- **로딩 상태**:
  - 스피너 애니메이션
  - 진행 상태 텍스트 ("AI 채점 중...")
  - 예상 시간 표시 (10-30초)

### 9.6 접근성 (Accessibility)

- **키보드 네비게이션**: Tab, Enter, ESC 지원
- **스크린 리더**: alt 텍스트, aria-label 추가
- **색상 대비**: WCAG 2.1 AA 기준 준수
- **폰트 크기**: 최소 14px 이상

---

## 10. 성능 및 보안 요구사항

### 10.1 성능 목표

| 지표 | 목표치 | 측정 방법 |
|------|--------|----------|
| **페이지 로딩 시간** | < 2초 | Lighthouse |
| **API 응답 시간** | < 300ms (DB 쿼리), < 30초 (AI 채점) | Cloudflare Analytics |
| **첫 콘텐츠 표시 (FCP)** | < 1.5초 | Web Vitals |
| **최대 콘텐츠 표시 (LCP)** | < 2.5초 | Web Vitals |
| **누적 레이아웃 이동 (CLS)** | < 0.1 | Web Vitals |
| **첫 입력 지연 (FID)** | < 100ms | Web Vitals |

### 10.2 확장성

- **동시 사용자**: 1,000명 (초기), 10,000명 (목표)
- **데이터베이스**: Cloudflare D1 (globally distributed)
- **파일 저장소**: Cloudflare R2 (unlimited)
- **API Rate Limit**: 100 requests/min per user

### 10.3 보안 요구사항

#### 인증 및 권한
- **비밀번호 암호화**: bcrypt (프로덕션), btoa (개발)
- **세션 관리**: UUID 기반, 7일 만료
- **CSRF 보호**: SameSite 쿠키
- **XSS 방지**: HTML 이스케이핑

#### 데이터 보호
- **전송 암호화**: HTTPS (TLS 1.3)
- **데이터 암호화**: AES-256 (저장 시)
- **개인정보 보호**: GDPR, 개인정보보호법 준수
- **데이터 백업**: 일일 자동 백업

#### API 보안
- **인증 토큰**: Bearer Token
- **Rate Limiting**: 100 requests/min
- **입력 검증**: 파일 크기 (10MB), 타입 (MIME)
- **SQL Injection 방지**: Prepared Statements

### 10.4 에러 핸들링

- **사용자 친화적 메시지**: "채점 중 오류가 발생했습니다. 다시 시도해주세요."
- **에러 로깅**: Cloudflare Workers Logs
- **자동 재시도**: 네트워크 오류 시 3회 재시도
- **폴백**: AI 채점 실패 시 수동 채점 안내

---

## 11. 로드맵 및 우선순위

### 11.1 Phase 1: MVP (완료) ✅

**목표**: 핵심 기능 구현 및 내부 테스트

- ✅ 사용자 인증 (교사/학생)
- ✅ 과제 생성 및 관리
- ✅ 루브릭 설정 (커스텀 + 10개 플랫폼 템플릿)
- ✅ 제시문 추가 (텍스트 + 이미지 OCR)
- ✅ 학생 답안 제출 (텍스트 + 파일 업로드)
- ✅ AI 자동 채점 (기준별 점수 + 상세 피드백)
- ✅ Split-Screen 검토 모달
- ✅ 채점 이력 및 재검토
- ✅ 일괄 출력 (개별/통합 PDF)
- ✅ 학생 대시보드 (액세스 코드, 피드백 조회)
- ✅ 관리자 대시보드 (통계, 시각화)
- ✅ 사용법 안내 페이지 (12개 스크린샷 포함)
- ✅ 프로필 드롭다운 메뉴
- ✅ 로그인 상태 표시
- ✅ Cloudflare R2 파일 영구 저장

### 11.2 Phase 2: 베타 테스트 (진행 중)

**목표**: 5-10개 학교 파일럿 프로그램

- ⏳ LLM API 통합 (OpenAI GPT-4, Anthropic Claude)
- ⏳ 프로덕션 배포 (Cloudflare Pages)
- ⏳ 비밀번호 암호화 (bcrypt)
- ⏳ 이메일 인증 (비밀번호 재설정)
- ⏳ 사용자 피드백 수집 (설문조사, 인터뷰)
- ⏳ 성능 최적화 (캐싱, 배치 처리)
- ⏳ QWK 0.61+ 검증 (인간 채점자 vs AI)

### 11.3 Phase 3: 정식 출시 (3-6개월)

**목표**: 1,000명 교사, 10,000명 학생 온보딩

- ⏳ Freemium 요금제 도입 (기본/라이트/프로/프리미엄)
- ⏳ 결제 시스템 통합 (Stripe, Toss Payments)
- ⏳ 학생 성장 추적 그래프 UI (Chart.js)
- ⏳ 학습 리소스 추천 시스템
- ⏳ CSV 내보내기 (채점 결과 일괄 다운로드)
- ⏳ 대량 채점 (한 번에 100개 이상)
- ⏳ 교사 통계 대시보드

### 11.4 Phase 4: 확장 (6-12개월)

**목표**: LMS 통합, 국제화, 고급 기능

- ⏳ Google Classroom 연동
- ⏳ Canvas LMS 연동
- ⏳ Microsoft Teams 연동
- ⏳ 다국어 지원 (영어, 일본어, 중국어)
- ⏳ Word 문서 처리 (.docx)
- ⏳ 표절 검사 (TurnItIn API)
- ⏳ 논술 비교 기능 (버전 간 차이 시각화)
- ⏳ 팀 협업 (교사 그룹, 공동 채점)

### 11.5 Phase 5: 고도화 (12개월+)

**목표**: AI 고도화, 예측 분석, B2B 확장

- ⏳ GPT-5, Claude 3+ 등 최신 LLM 적용
- ⏳ AI 채점 신뢰도 점수 표시
- ⏳ 학생 성장 예측 (Machine Learning)
- ⏳ 학교 단위 대시보드 (교장, 교감용)
- ⏳ 교육청 연동 (대규모 데이터 분석)
- ⏳ API 개방 (외부 서비스 통합)

---

## 12. 성공 지표

### 12.1 핵심 지표 (KPI)

| 지표 | 정의 | 목표치 (3개월) | 목표치 (6개월) |
|------|------|---------------|---------------|
| **활성 교사 수** | 월간 활성 사용자 (MAU) | 100명 | 1,000명 |
| **활성 학생 수** | 월간 활성 사용자 (MAU) | 500명 | 10,000명 |
| **총 제출물 수** | 누적 답안 제출 수 | 1,000개 | 50,000개 |
| **채점 완료율** | 채점 완료 / 총 제출물 | 90% | 95% |
| **재제출률** | 재제출 / 총 제출물 | 20% | 30% |
| **평균 점수 개선율** | 재제출 시 점수 향상 | 10% | 15% |
| **교사 만족도** | NPS (Net Promoter Score) | 7.0 | 8.0 |
| **학생 만족도** | 피드백 유용성 설문 | 70% | 85% |

### 12.2 비즈니스 지표

| 지표 | 정의 | 목표치 (6개월) |
|------|------|---------------|
| **전환율** | 무료 → 유료 전환율 | 10% |
| **월간 반복 수익 (MRR)** | 구독 수익 | $5,000 |
| **고객 생애 가치 (LTV)** | 고객당 평균 수익 | $300 |
| **고객 획득 비용 (CAC)** | 고객당 마케팅 비용 | $50 |
| **LTV/CAC 비율** | 수익성 지표 | 6:1 |

### 12.3 기술 지표

| 지표 | 정의 | 목표치 |
|------|------|--------|
| **API 가용성** | Uptime | 99.5% |
| **평균 응답 시간** | API 레이턴시 | < 300ms |
| **AI 채점 정확도** | QWK (vs 인간 채점자) | 0.61+ |
| **에러율** | 총 요청 대비 오류 비율 | < 1% |
| **파일 업로드 성공률** | 업로드 성공 / 총 시도 | > 95% |

---

## 13. 리스크 및 제약사항

### 13.1 기술적 리스크

| 리스크 | 영향도 | 완화 방안 |
|--------|--------|----------|
| **LLM API 비용 급증** | 높음 | 배치 처리, 캐싱, 요금제별 제한 |
| **Cloudflare 서비스 장애** | 높음 | 다중 리전 배포, 백업 시스템 |
| **AI 채점 정확도 낮음** | 중간 | 교사 수정 기능, 지속적인 프롬프트 개선 |
| **파일 업로드 실패** | 중간 | 재시도 로직, 에러 메시지 개선 |
| **데이터베이스 성능 저하** | 낮음 | 인덱싱, 쿼리 최적화 |

### 13.2 비즈니스 리스크

| 리스크 | 영향도 | 완화 방안 |
|--------|--------|----------|
| **교사 채택률 낮음** | 높음 | 무료 체험 연장, 온보딩 개선 |
| **학생 참여도 낮음** | 중간 | 게임화, 리워드 시스템 |
| **경쟁 서비스 등장** | 중간 | 차별화 기능 (한글 지원, 상세 피드백) |
| **개인정보 보호 이슈** | 높음 | GDPR 준수, 데이터 암호화 |
| **비용 구조 불안정** | 낮음 | Freemium 모델, 다양한 요금제 |

### 13.3 제약사항

| 제약사항 | 설명 | 대응 방안 |
|---------|------|----------|
| **Cloudflare Workers CPU 제한** | 10ms (무료), 30ms (유료) | 비동기 처리, 백그라운드 작업 |
| **파일 크기 제한** | 최대 10MB | 압축, 분할 업로드 안내 |
| **LLM 컨텍스트 제한** | GPT-4: 8,192 토큰 | 논술 길이 제한 (최대 2,000자) |
| **D1 데이터베이스 크기** | 100MB (무료), 10GB (유료) | 정기적인 데이터 아카이빙 |
| **R2 저장소 비용** | 월 $0.015/GB | 오래된 파일 자동 삭제 |

---

## 14. 부록

### 14.1 용어 정의

| 용어 | 정의 |
|------|------|
| **AEG** | Automated Essay Grading (자동화 논술 채점) |
| **AWE** | Automated Writing Evaluation (자동화 글쓰기 평가) |
| **QWK** | Quadratic Weighted Kappa (일치도 지표) |
| **루브릭 (Rubric)** | 논술 평가 기준 (기준명 + 설명) |
| **제시문 (Prompt Material)** | 논술 과제에 첨부되는 참고 자료 |
| **액세스 코드 (Access Code)** | 학생이 과제에 접근하기 위한 6자리 숫자 코드 |
| **Split-Screen 모달** | 학생 답안(좌)과 피드백(우)을 동시에 표시하는 UI |
| **OCR** | Optical Character Recognition (광학 문자 인식) |

### 14.2 참고 문서

- [EssayGrader.ai](https://www.essaygrader.ai/) - 영감의 원천
- [Cloudflare Workers Docs](https://developers.cloudflare.com/workers/)
- [Hono Framework](https://hono.dev/)
- [Google Cloud Vision API](https://cloud.google.com/vision/docs)
- [TailwindCSS](https://tailwindcss.com/)

### 14.3 프로젝트 링크

- **GitHub**: `https://github.com/eunha0/webapp`
- **개발 서버**: `https://3000-iigjpsbl85aj2ml3n1x69-cbeee0f9.sandbox.novita.ai`
- **사용법 안내**: `https://3000-iigjpsbl85aj2ml3n1x69-cbeee0f9.sandbox.novita.ai/guide`
- **백업**: `https://www.genspark.ai/api/files/s/5yP7WKBm`

### 14.4 테스트 계정

**교사 계정**:
```
Email: teacher@test.com
Password: test1234
```

**학생 계정**:
```
Email: student@test.com
Password: test1234
학년: 고등학교 1학년
```

---

## 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2025-11-01 | Team | 초기 PRD 작성 (MVP 기능) |
| 2.0 | 2025-12-05 | Team | 최신 업데이트 반영 (프로필 드롭다운, 로그인 상태 표시, 사용법 안내 페이지 스크린샷 최적화) |

---

**문서 끝**

**Built with ❤️ using Hono, Cloudflare Workers, and AI**  
**Designed to transform education through intelligent automation**
