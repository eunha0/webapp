#!/usr/bin/env python3
"""
Update rubric content with detailed 4-point criteria
"""
import sqlite3

# Database path
DB_PATH = '/home/user/webapp-ai/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/be8fc967107d562340aa6bc47a19a0b8dc2ace74791bc8a07f763688e48e9db7.sqlite'

# Rubric detailed content with 4-point criteria
rubrics = {
    10: {
        'title': '뉴욕 주 리젠트 시험 논증적 글쓰기 루브릭 (4개 기준)',
        'content': '''이 루브릭은 뉴욕 주 리젠트 시험의 논증적 글쓰기 평가를 위한 상세 기준입니다. 4개의 주요 평가 영역으로 구성되어 있으며, 각 영역에서 4점 만점을 획득하기 위한 기준은 다음과 같습니다.

**1. 내용 및 분석 (4점 기준)**
• 과제의 지시에 따라 정확하고 통찰력 있는 주장을 제시한다
• 주장을 뒷받침하고 다른 주장이나 반대 주장과 구별하기 위해 필요한 만큼 텍스트에 대한 깊이 있고 통찰력 있는 분석을 보여준다

**2. 증거 활용 능력 (4점 기준)**
• 분석을 뒷받침하기 위해 광범위하고 구체적이며 관련성 높은 증거를 매우 효과적으로 활용하여 아이디어를 충분히 그리고 신중하게 제시한다
• 직접 인용문과 의역된 자료를 다룰 때 표절을 피하기 위해 원 자료를 적절히 인용한다

**3. 일관성, 구성 및 스타일 (4점 기준)**
• 아이디어와 정보를 능숙하게 구성하여 일관성 있고 논리적인 에세이를 작성한다
• 정교한 언어와 구조를 사용하여 공식적인 스타일을 확립하고 유지한다

**4. 규칙 숙달도 (4점 기준)**
• 관례적 표현을 완벽하게 숙달하여 정교한 언어 사용 시에도 거의 오류가 없다'''
    },
    11: {
        'title': '뉴욕 주 리젠트 시험 분석적 글쓰기 루브릭',
        'content': '''이 루브릭은 뉴욕 주 리젠트 시험의 분석적 글쓰기 평가를 위한 상세 기준입니다. 4개의 주요 평가 영역으로 구성되어 있으며, 각 영역에서 4점 만점을 획득하기 위한 기준은 다음과 같습니다.

**1. 내용 및 분석 (4점 기준)**
• 분석 기준을 명확히 설정하는 논리적인 중심 아이디어와 글쓰기 전략을 제시한다
• 중심 아이디어를 전개하기 위해 저자가 글쓰기 전략을 사용한 방식을 깊이 있게 분석한다

**2. 증거 활용 능력 (4점 기준)**
• 분석을 뒷받침하기 위해 구체적이고 관련성 있는 증거를 효과적으로 활용하여 아이디어를 명확하고 일관되게 제시함

**3. 일관성, 구성 및 스타일 (4점 기준)**
• 아이디어와 정보를 논리적으로 구성하여 일관되고 연결된 응답을 생성함
• 정확한 언어와 건전한 구조를 사용하여 형식적인 스타일을 확립하고 유지함

**4. 규칙 숙달도 (4점 기준)**
• 규칙 숙달도가 뛰어나며 오류가 드물게 나타남'''
    },
    12: {
        'title': '뉴욕 주 중학교 논술 루브릭',
        'content': '''이 루브릭은 뉴욕 주 중학교 논술 평가를 위한 상세 기준입니다. 4개의 주요 평가 영역으로 구성되어 있으며, 각 영역에서 4점 만점을 획득하기 위한 기준은 다음과 같습니다.

**1. 내용 및 분석 (4점 기준)**
• 과제의 목적과 논리적으로 연결되는 방식으로 주제를 설득력 있게 명확히 제시한다
• 텍스트에 대한 통찰력 있는 분석을 보여준다

**2. 증거 활용 능력 (4점 기준)**
• 주제와 관련된 잘 선택된 사실, 정의, 구체적인 세부 사항, 인용문 또는 텍스트의 다른 정보와 예시를 활용하여 주제를 전개한다
• 다양하고 관련성 있는 증거를 지속적으로 사용한다

**3. 일관성, 구성 및 문체 (4점 기준)**
• 적절한 다양한 전환을 능숙하게 사용하여 통일된 전체를 만들고 의미를 강화하는 명확한 구성을 보여준다
• 학년에 적합하고 문체적으로 정교한 언어와 해당 분야 특유의 어휘를 사용하여 뚜렷한 어조를 유지하며 형식적인 문체를 확립하고 유지한다
• 주제와 제시된 정보에서 명확하게 도출되는 설득력 있는 결론문 또는 결론 부분을 제공한다

**4. 규칙 준수 (4점 기준)**
• 학년 수준에 맞는 규칙 숙달도를 보여주며 오류가 거의 없다'''
    },
    13: {
        'title': '뉴욕 주 초등학교 논술 루브릭',
        'content': '''이 루브릭은 뉴욕 주 초등학교 논술 평가를 위한 상세 기준입니다. 4개의 주요 평가 영역으로 구성되어 있으며, 각 영역에서 4점 만점을 획득하기 위한 기준은 다음과 같습니다.

**1. 내용 및 분석 (4점 기준)**
• 과제와 목적에 논리적으로 부합하는 방식으로 주제를 명확히 제시함
• 텍스트에 대한 통찰력 있는 이해와 분석을 보여줌

**2. 증거 활용 능력 (4점 기준)**
• 텍스트에서 관련성 있고 잘 선택된 사실, 정의, 구체적 세부사항, 인용문 또는 기타 정보와 예시를 활용하여 주제를 전개함
• 다양하고 관련성 있는 증거의 사용을 지속함

**3. 일관성, 구성 및 문체 (4점 기준)**
• 명확하고 목적에 부합하는 구성을 보여줌
• 학년 수준에 맞는 단어와 구문을 사용하여 아이디어를 능숙하게 연결함
• 학년 수준에 맞는 문체적으로 정교한 언어와 분야별 전문 용어를 사용함
• 제시된 주제와 정보에서 명확하게 도출되는 결론적 진술을 제공함

**4. 규칙 준수 (4점 기준)**
• 학년 수준에 맞는 규칙 숙달도를 보여주며 오류가 거의 없음'''
    },
    14: {
        'title': 'IB 중등 프로그램 고등학교 개인과 사회 논술 루브릭',
        'content': '''이 루브릭은 IB 중등 프로그램 고등학교 개인과 사회 논술 평가를 위한 상세 기준입니다. 4개의 주요 평가 영역으로 구성되어 있으며, 각 영역에서 4점 만점을 획득하기 위한 기준은 다음과 같습니다.

**1. 지식과 이해 (4점 기준)**
• 처음부터 끝까지 관련 어휘를 다양하고 정확하게 사용한다
• 철저하고 정확한 설명, 해설 및 예시를 통해 내용과 개념에 대한 상세한 지식과 이해를 보여준다

**2. 조사 (4점 기준)**
• 명확하고 집중된 연구 질문을 구성/선택하고 그 관련성을 정당화한다
• 포괄적인 실행 계획을 수립하고 효과적으로 따른다
• 적절하고 다양한 관련 정보를 수집하고 기록하는 방법을 사용한다
• 조사 과정과 결과를 철저히 평가한다

**3. 의사 소통 (4점 기준)**
• 항상 명확하고 적절한 방식으로 정보와 아이디어를 전달한다
• 명확하고 논리적인 구조로 효과적으로 정보와 아이디어를 구성한다
• 적절한 관례를 사용하여 정보 출처를 일관되게 제시한다

**4. 비판적 사고 (4점 기준)**
• 다양한 정보를 철저히 분석한다
• 서로 다른 관점과 그 함의를 평가한다
• 논리적으로 잘 구성된 증거로 뒷받침된 의견이나 결론을 제시한다'''
    },
    15: {
        'title': 'IB 중등 프로그램 중학교 개인과 사회 논술 루브릭',
        'content': '''이 루브릭은 IB 중등 프로그램 중학교 개인과 사회 논술 평가를 위한 상세 기준입니다. 4개의 주요 평가 영역으로 구성되어 있으며, 각 영역에서 4점 만점을 획득하기 위한 기준은 다음과 같습니다.

**1. 지식과 이해 (4점 기준)**
• 다양한 용어를 일관되게 정확하게 사용한다
• 발전되고 정확한 설명, 해설 및 예시를 통해 내용과 개념에 대한 상세한 지식과 이해를 보여준다

**2. 조사 (4점 기준)**
• 명확하고 집중된 연구 질문을 구성/선택하고 그 관련성을 설명한다
• 연구 질문을 조사하기 위한 일관된 실행 계획을 효과적으로 수립하고 따른다
• 적절한 다양한 관련 정보를 수집하고 기록하는 방법을 사용한다
• 교사의 지도하에 연구 과정과 결과에 대한 상세한 평가를 제공한다

**3. 의사 소통 (4점 기준)**
• 청중과 목적에 완전히 적합한 스타일로 정보와 아이디어를 전달한다
• 과제의 지시에 완전히 따라 정보와 아이디어를 구성한다
• 완전한 참고문헌 목록을 작성하고 항상 원 자료를 인용한다

**4. 비판적 사고 (4점 기준)**
• 개념, 쟁점, 모델, 시각적 표현이나 이론에 대한 상세한 분석을 수행한다
• 정보를 요약하여 일관되고 잘 뒷받침된 논증을 제시한다
• 다양한 자료/데이터의 출처와 목적을 효과적으로 분석하며, 그 가치와 한계를 지속적으로 인식한다
• 다양한 관점을 명확히 인식하고 그 함의를 일관되게 설명한다'''
    },
    16: {
        'title': 'IB 중등 프로그램 과학 논술 루브릭',
        'content': '''이 루브릭은 IB 중등 프로그램 과학 논술 평가를 위한 상세 기준입니다. 4개의 주요 평가 영역으로 구성되어 있으며, 각 영역에서 4점 만점을 획득하기 위한 기준은 다음과 같습니다.

**1. 지식과 이해 (4점 기준)**
• 과학적 지식을 개괄적으로 설명할 수 있다
• 과학적 지식과 이해를 적용하여 익숙한 상황에서 제시된 문제를 해결하고, 익숙하지 않은 상황에서 제시된 문제에 대한 해결책을 제안할 수 있다
• 정보를 해석하여 과학적으로 뒷받침되는 판단을 내릴 수 있다

**2. 탐구 및 설계 (4점 기준)**
• 과학적 탐구를 통해 검증할 문제나 질문을 개요로 제시할 수 있다
• 과학적 추론을 사용하여 검증 가능한 예측을 개요로 제시할 수 있다
• 변수를 조작하는 방법을 개요로 제시하고, 충분하고 관련성 있는 데이터를 수집하는 방법을 개요로 제시할 수 있다
• 적절한 재료와 장비를 선택하는 논리적이고 완전하며 안전한 방법을 설계할 수 있다

**3. 의사 소통 (4점 기준)**
• 항상 명확하고 적절한 방식으로 정보와 아이디어를 전달한다
• 명확하고 논리적인 구조로 효과적으로 정보와 아이디어를 구성한다
• 적절한 관례를 사용하여 정보 출처를 일관되게 제시한다

**4. 비판적 사고 (4점 기준)**
• 다양한 정보를 철저히 분석한다
• 서로 다른 관점과 그 함의를 평가한다
• 논리적으로 잘 구성된 증거로 뒷받침된 의견이나 결론을 제시한다'''
    }
}

def update_rubric_content():
    """Update rubric content in database"""
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        
        for rubric_id, data in rubrics.items():
            cursor.execute('''
                UPDATE resource_posts 
                SET content = ?, updated_at = CURRENT_TIMESTAMP 
                WHERE id = ?
            ''', (data['content'], rubric_id))
            print(f"✅ Updated rubric ID {rubric_id}: {data['title']}")
        
        conn.commit()
        print(f"\n✅ Successfully updated {len(rubrics)} rubric posts")
        
        # Verify updates
        print("\n📋 Verification:")
        for rubric_id in rubrics.keys():
            cursor.execute('SELECT id, title, substr(content, 1, 100) FROM resource_posts WHERE id = ?', (rubric_id,))
            result = cursor.fetchone()
            if result:
                print(f"ID {result[0]}: {result[1]}")
                print(f"   Preview: {result[2]}...")
        
        conn.close()
        
    except Exception as e:
        print(f"❌ Error: {e}")
        raise

if __name__ == '__main__':
    update_rubric_content()
